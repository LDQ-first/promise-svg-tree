{"version":3,"sources":["webpack:///./app/css/style.css","webpack:///./app/index.js","webpack:///./app/js/main.js","webpack:///./node_modules/._promise.map@0.0.2@promise.map/index.js"],"names":["SVG_NS","MAX_FLOWER_AGE","MAX_GROWTH_TICKS","BRANCH_COLOR","shadeRGBColor","color","percent","f","split","t","p","R","parseInt","slice","G","B","Math","round","maxDepth","trunkWidth","branchShrinkage","maxAngleDelta","PI","delay","svg","document","getElementById","scaleIncrement","flowerSize","dropIncrement","rotateIncrement","wind","windIncrement","maxWind","createFlower","_ref","x","y","idx","telomeres","growthPhase","attached","hangPhase","scale","rotation","element","createElementNS","setAttribute","flower","grow","random","drop","transform","radius","step","window","innerHeight","pow","delete","_delete","removeChild","childNodes","randomBranch","floor","length","insertBefore","animateFlowers","branchEndings","branchesInUse","flowers","findFreeBranchIdx","i","attachFlower","branch","push","Object","assign","tick","reduce","acc","concat","console","log","Array","fill","forEach","min","max","requestAnimationFrame","wrap","a","isArray","flatten","left","right","drawBranch","x1","y1","angle","depth","branchWidth","branchColor","x2","cos","y2","sin","line","style","appendChild","newDepth","Promise","resolve","newBranchWidth","newBranchColor","direction","newAngle","newLength","setTimeout","then","drawTree","innerWidth","init"],"mappings":"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","file":"js/main.98014c14.js","sourcesContent":["// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/css/style.css\n// module id = ./app/css/style.css\n// module chunks = 0","import './js/main.js'\r\nimport './css/style.css'\n\n\n// WEBPACK FOOTER //\n// ./app/index.js","import map from 'promise.map'\r\n\r\n\"use strict\";\r\n\r\nvar SVG_NS = \"http://www.w3.org/2000/svg\";\r\nvar MAX_FLOWER_AGE = 50;\r\nvar MAX_GROWTH_TICKS = 15;\r\nvar BRANCH_COLOR = \"rgb(101, 67, 33)\";\r\n\r\n// from http://stackoverflow.com/questions/5560248/programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors\r\nfunction shadeRGBColor(color, percent) {\r\n  var f = color.split(\",\"),\r\n      t = percent < 0 ? 0 : 255,\r\n      p = percent < 0 ? percent * -1 : percent,\r\n      R = parseInt(f[0].slice(4)),\r\n      G = parseInt(f[1]),\r\n      B = parseInt(f[2]);\r\n  return \"rgb(\" + (Math.round((t - R) * p) + R) + \",\" + (Math.round((t - G) * p) + G) + \",\" + (Math.round((t - B) * p) + B) + \")\";\r\n}\r\n\r\n(function () {\r\n  var maxDepth = 11,\r\n      trunkWidth = 12;\r\n  var branchShrinkage = 0.8;\r\n  var maxAngleDelta = Math.PI / 2;\r\n  var delay = 100;\r\n  var svg = document.getElementById(\"svg\");\r\n\r\n  var scaleIncrement = 0.1;\r\n  var flowerSize = 10.0;\r\n  var dropIncrement = 2.0;\r\n  var rotateIncrement = Math.PI * 2;\r\n\r\n  var wind = 0;\r\n  var windIncrement = 1;\r\n  var maxWind = 2.0;\r\n\r\n  var createFlower = function createFlower(_ref) {\r\n    var x = _ref.x;\r\n    var y = _ref.y;\r\n    var idx = _ref.idx;\r\n\r\n    var telomeres = MAX_FLOWER_AGE;\r\n    var growthPhase = 0;\r\n    var attached = true;\r\n    var hangPhase = 1;\r\n    var scale = 0.5;\r\n    var rotation = 0;\r\n    var element = document.createElementNS(SVG_NS, \"use\");\r\n    element.setAttribute(\"href\", \"#flower\");\r\n    element.setAttribute(\"style\", \"z-index: -1\");\r\n\r\n    var flower = {\r\n      idx: idx,\r\n\r\n      grow: function grow() {\r\n        growthPhase += 1;\r\n        scale += scaleIncrement * Math.random();\r\n      },\r\n      drop: function drop() {\r\n        y += dropIncrement * Math.random();\r\n        x += dropIncrement * (Math.random() - 0.5) + wind;\r\n        rotation += rotateIncrement * (Math.random() - 0.5);\r\n      },\r\n      transform: function transform() {\r\n        var radius = scale * flowerSize / 2;\r\n        element.setAttribute(\"transform\", \"translate(\" + (x - radius) + \",\" + (y - radius) + \") scale(\" + scale + \") rotate(\" + rotation + \")\");\r\n      },\r\n      step: function step() {\r\n        if (y >= window.innerHeight - 2 * flowerSize) {\r\n          telomeres -= 1;\r\n        } else if (growthPhase >= MAX_GROWTH_TICKS) {\r\n          if (attached) {\r\n            attached = Math.random() < Math.pow(0.9999, hangPhase);\r\n            hangPhase += 0.00001;\r\n          } else {\r\n            this.drop();\r\n          }\r\n        } else {\r\n          this.grow();\r\n        }\r\n\r\n        this.transform();\r\n\r\n        return telomeres;\r\n      },\r\n      delete: function _delete() {\r\n        svg.removeChild(element);\r\n      }\r\n    };\r\n\r\n    flower.transform();\r\n\r\n    // pick a random branch so it looks like the flowers are falling through them\r\n    var childNodes = svg.childNodes;\r\n\r\n    var randomBranch = childNodes[Math.floor(Math.random() * childNodes.length)];\r\n    svg.insertBefore(element, randomBranch);\r\n\r\n    return flower;\r\n  };\r\n\r\n  var animateFlowers = function animateFlowers(branchEndings) {\r\n    var branchesInUse = {};\r\n    var flowers = [];\r\n\r\n    var findFreeBranchIdx = function findFreeBranchIdx() {\r\n      for (var i = 0; i < branchEndings.length; i++) {\r\n        var idx = Math.floor(Math.random() * branchEndings.length);\r\n        if (!branchesInUse[idx]) {\r\n          branchesInUse[idx] = true;\r\n          return idx;\r\n        }\r\n      }\r\n\r\n      return -1;\r\n    };\r\n\r\n    var attachFlower = function attachFlower() {\r\n      var idx = findFreeBranchIdx();\r\n      if (idx >= 0) {\r\n        var branch = branchEndings[idx];\r\n        flowers.push(createFlower(Object.assign({}, branch, { idx: idx })));\r\n      }\r\n    };\r\n\r\n    var tick = function tick() {\r\n      flowers = flowers.reduce(function (acc, flower) {\r\n        if (flower.step() > 0) {\r\n          return acc.concat([flower]);\r\n        } else {\r\n          console.log(\"deleting flower\", flower.idx);\r\n          flower.delete();\r\n          delete branchesInUse[flower.idx];\r\n          return acc;\r\n        }\r\n      }, []);\r\n\r\n      Array(5).fill().forEach(function () {\r\n        if (Math.random() < 0.02) {\r\n          attachFlower();\r\n        }\r\n      });\r\n\r\n      if (Math.random() < 0.02) {\r\n        wind = Math.min(maxWind, wind + (Math.random() * 2 - 1) * windIncrement);\r\n        wind = Math.max(-maxWind, wind);\r\n      }\r\n\r\n      requestAnimationFrame(tick);\r\n    };\r\n\r\n    requestAnimationFrame(tick);\r\n  };\r\n\r\n  var wrap = function wrap(a) {\r\n    return Array.isArray(a) ? a : [a];\r\n  };\r\n  var flatten = function flatten(a) {\r\n    if (!Array.isArray(a)) {\r\n      return a;\r\n    }\r\n\r\n    var left = a[0];\r\n    var right = a[1];\r\n\r\n    return wrap(left).concat(wrap(right));\r\n  };\r\n\r\n  var drawBranch = function drawBranch(x1, y1, length, angle, depth, branchWidth, branchColor) {\r\n    var x2 = x1 + length * Math.cos(angle);\r\n    var y2 = y1 + length * Math.sin(angle);\r\n\r\n    var line = document.createElementNS(SVG_NS, \"line\");\r\n    var style = \"stroke:\" + branchColor + \";stroke-width:\" + branchWidth + \";z-index:1;\";\r\n\r\n    line.setAttribute(\"x1\", x1);\r\n    line.setAttribute(\"x2\", x2);\r\n    line.setAttribute(\"y1\", y1);\r\n    line.setAttribute(\"y2\", y2);\r\n    line.setAttribute(\"style\", style);\r\n\r\n    svg.appendChild(line);\r\n\r\n    var newDepth = depth - 1;\r\n    if (newDepth <= 0) {\r\n      return Promise.resolve({ x: x2, y: y2 });\r\n    }\r\n\r\n    var newBranchWidth = branchWidth * branchShrinkage;\r\n    var newBranchColor = shadeRGBColor(branchColor, 0.1);\r\n\r\n    return map([-1, 1], function (direction) {\r\n      var newAngle = angle + maxAngleDelta * (Math.random() * 0.5 * direction);\r\n      var newLength = length * (branchShrinkage + Math.random() * (1.0 - branchShrinkage));\r\n\r\n      return new Promise(function (resolve) {\r\n        setTimeout(function () {\r\n          return resolve(drawBranch(x2, y2, newLength, newAngle, newDepth, newBranchWidth, newBranchColor));\r\n        }, delay);\r\n      });\r\n    }).then(flatten);\r\n  };\r\n\r\n  // returns a promise that resolves to an array of the positions of the branches\r\n  var drawTree = function drawTree(maxDepth, trunkWidth) {\r\n    return drawBranch(Math.floor(window.innerWidth / 2), Math.floor(window.innerHeight / 1.02), 60, -Math.PI / 2, maxDepth, trunkWidth, BRANCH_COLOR);\r\n  };\r\n\r\n  var init = function init() {\r\n    svg.setAttribute(\"width\", window.innerWidth);\r\n    svg.setAttribute(\"height\", window.innerHeight);\r\n    drawTree(maxDepth, trunkWidth).then(animateFlowers);\r\n  };\r\n\r\n  init();\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./app/js/main.js","'use strict';\n\n/**\n * Promise.map(arr, fn, concurrency) in Bluebird\n *\n * code take from caolan/async\n */\n\nmodule.exports = function map(arr, fn, concurrency) {\n  // concurrency\n  concurrency = concurrency || Infinity;\n  if (typeof concurrency !== 'number') {\n    throw new TypeError(String(concurrency) + ' is not a number');\n  }\n\n  return new Promise(function(resolve, reject) {\n    var completed = 0;\n    var started = 0;\n    var running = 0;\n    var results = new Array(arr.length);\n\n    (function replenish() {\n      if (completed >= arr.length) {\n        return resolve(results);\n      }\n\n      while (running < concurrency && started < arr.length) {\n        running++;\n        started++;\n\n        (function(index) {\n          var cur = arr[index];\n          fn.call(cur, cur, index, arr)\n            .then(function(result) {\n              running--;\n              completed++;\n              results[index] = result;\n\n              replenish();\n            })\n            .catch(reject);\n        })(started - 1);\n      }\n    })();\n  });\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/._promise.map@0.0.2@promise.map/index.js\n// module id = ./node_modules/._promise.map@0.0.2@promise.map/index.js\n// module chunks = 0"],"sourceRoot":""}